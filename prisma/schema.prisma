// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

generator client {
  provider = "prisma-client-js"
}


model ReviewedAlbum {
    id                     Int             @id @default(autoincrement())
    createdAt              DateTime        @default(now())
    artist                 Artist          @relation(fields: [artist_id], references: [id])
    artist_id              Int
    album_type             String
    name                   String
    spotify_id             String          @unique
    release_date           String
    image_urls             String          @db.TinyText       //JSON object of array of urls
    tracks                 Track[]
    runtime                String?
    review_content         String?         @db.TinyText
    review_score           Float?
    review_date            String?

    @@index([artist_id])

}

model Artist{
    id                     Int             @id @default(autoincrement())
    name                   String
    spotify_id             String          @unique
    image_urls             String          @db.TinyText //JSON object of array of urls
    albums                 ReviewedAlbum[]
    average_score          Float
    leaderboard_position   Int?
}

model Track {
    id                     Int             @id @default(autoincrement())
    name                   String
    spotify_id             String          @unique
    runtime                String
    artists                String       //JSON object of array of names
    album                  ReviewedAlbum?  @relation(fields: [album_id], references: [id])
    album_id               Int
    review_score           Float?

    @@index([album_id])
}

model AccessToken {
    id                     Int             @id @default(autoincrement())
    token                  String
    expires_in             Int
    created_at             Int?        
    updated_at             Int?        
}

model Test{
  id                     Int             @id @default(autoincrement())
  createdAt              DateTime        @default(now())
  title                  String
  age                    Int        
  country                String  
}

